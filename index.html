<html>
<head>
<title>Game</title>

<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
<script type="text/javascript" src="glMatrix-0.9.5.min.js"></script>
<script type="text/javascript" src="webgl-utils.js"></script>
<script type="text/javascript" src="game.js"></script>
<script type="text/javascript" src="cube.js"></script>

<script id="shader-fs" type="x-shader/x-fragment">
    precision mediump float;
    
    // Passed in from the vertex shader.
    varying vec3 v_normal;
    varying vec3 v_surfaceToLight1;
    varying vec3 v_surfaceToLight2;
    varying vec3 v_surfaceToLight3;
    varying vec3 v_surfaceToLight4;
    varying vec3 v_surfaceToLight5;
    //varying vec3 v_surfaceToView;
    
    uniform vec4 u_color;
    
    void main() {
      vec3 normal = normalize(v_normal);
      vec3 surfaceToLightDirection1 = normalize(v_surfaceToLight1);
      vec3 surfaceToLightDirection2 = normalize(v_surfaceToLight2);
      vec3 surfaceToLightDirection3 = normalize(v_surfaceToLight3);
      vec3 surfaceToLightDirection4 = normalize(v_surfaceToLight4);
      vec3 surfaceToLightDirection5 = normalize(v_surfaceToLight5);
      float light1 = dot(normal , surfaceToLightDirection1);
      float light2 = dot(normal , surfaceToLightDirection2);
      float light3 = dot(normal , surfaceToLightDirection3);
      float light4 = dot(normal , surfaceToLightDirection4);
      float light5 = dot(normal , surfaceToLightDirection5);

      gl_FragColor = vec4(0.1,0.1,0.1,1.0) ;
      
      float light = pow(light1,10.0);
      if (light > 0.0)
      {
        gl_FragColor += vec4(light*0.5,light*0.5,light,0) ;
      }   
      light = pow(light2,10.0);
      if (light > 0.0)
      {
        gl_FragColor += vec4(light,light,light*0.5,0) ;
      }       
      light = pow(light3,10.0);
      if (light > 0.0)
      {
        gl_FragColor += vec4(light,light,light*0.5,0) ;
      }       
      light = pow(light4,10.0);
      if (light > 0.0)
      {
        gl_FragColor += vec4(light*0.5,light,light,0) ;
      }         
      light = pow(light5,10.0);
      if (light > 0.0)
      {
        gl_FragColor += vec4(light,light*0.5,light,0) ;
      }   
    }
</script>
<script id="shader-vs" type="x-shader/x-vertex">
    attribute vec4 aVertexPosition;
    attribute vec3 aVertexNormal;

    uniform mat4 uMVMatrix;
    uniform mat4 uPMatrix;
    uniform mat4 uMVInverseTransposeMatrix;
    uniform vec3 uLightWorldPosition;
    
    varying vec3 v_normal;    
    varying vec3 v_surfaceToLight1;
    varying vec3 v_surfaceToLight2;
    varying vec3 v_surfaceToLight3;
    varying vec3 v_surfaceToLight4;
    varying vec3 v_surfaceToLight5;
    varying vec3 v_surfaceToView;
    
    void main() {
      // Multiply the position by the matrix.
      gl_Position = uPMatrix * uMVMatrix * aVertexPosition;
    
      // orient the normals and pass to the fragment shader
      v_normal = mat3(uMVInverseTransposeMatrix) * aVertexNormal;
    
      // compute the world position of the surfoace
      vec3 surfaceWorldPosition = (uMVMatrix * aVertexPosition).xyz;
    
      // compute the vector of the surface to the light
      // and pass it to the fragment shader
      v_surfaceToLight1 = vec3(0,50.0,0) - surfaceWorldPosition;
      v_surfaceToLight2 = vec3(50.0,50.0,50.0) - surfaceWorldPosition;
      v_surfaceToLight3 = vec3(50.0,50.0,-50.0) - surfaceWorldPosition;
      v_surfaceToLight4 = vec3(-50.0,50.0,-50.0) - surfaceWorldPosition;
      v_surfaceToLight5 = vec3(-50.0,50.0,50.0) - surfaceWorldPosition;
    
      // compute the vector of the surface to the view/camera
      // and pass it to the fragment shader
      //v_surfaceToView = u_viewWorldPosition - surfaceWorldPosition;
    }
    
</script>
<script type="text/javascript" src="webgl.js"></script>

</head>
<body onload="webGLStart();" onkeydown="mediaSetKeyDownFct(event)" onkeyup="mediaSetKeyUpFct(event)" onmousedown="mediaSetMouseDownFct(event)" onmouseup="mediaSetMouseUpFct(event)" >
<button type="fullscreen" onclick="fullScreen()">fullscreen</button>
<button type="fullscreen" onclick="smallScreen()">small</button>
 <p>
 <canvas id="canvas" style="border: none;" width="1024" height="600"></canvas>

</body>
</html>


